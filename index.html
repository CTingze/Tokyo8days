<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>東京富士山 8日遊</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #1a1a1a;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        
        .timeline-line {
            position: absolute; left: 1.25rem; top: 2.5rem; bottom: -2rem; width: 2px; background-color: #e5e7eb; z-index: 0;
        }
        .last-item .timeline-line { display: none; }
        
        .slide-left-enter-active, .slide-left-leave-active,
        .slide-right-enter-active, .slide-right-leave-active {
            transition: all 0.3s ease-out;
        }
        .slide-left-enter-from { opacity: 0; transform: translateX(30px); }
        .slide-left-leave-to { opacity: 0; transform: translateX(-30px); }
        .slide-right-enter-from { opacity: 0; transform: translateX(-30px); }
        .slide-right-leave-to { opacity: 0; transform: translateX(30px); }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out;
        }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto min-h-screen relative pb-32 overflow-hidden bg-gray-900 select-none">

    <!-- 背景層 -->
    <div class="fixed inset-0 z-0 bg-cover bg-center transition-all duration-700 ease-in-out"
         :style="{ backgroundImage: `url(${currentDayData.bgImage})` }">
        <div class="absolute inset-0 bg-gray-900/60 backdrop-blur-[2px]"></div>
    </div>

    <!-- 內容區 -->
    <div class="relative z-10 min-h-screen" 
         @touchstart="onTouchStart" 
         @touchend="onTouchEnd">
         
        <transition :name="transitionName" mode="out-in">
            <div :key="currentDayIndex" class="w-full">
                
                <!-- 1. 頂部資訊卡 -->
                <div class="bg-gradient-to-r from-red-600/95 to-orange-600/95 backdrop-blur-xl text-white p-6 rounded-b-3xl shadow-xl sticky top-0 z-40 transition-all duration-300 border-b border-white/10">
                    <div class="flex justify-between items-start">
                        <div>
                            <h2 class="text-sm text-yellow-300 font-bold tracking-wider drop-shadow-sm">TOKYO TRIP 2025</h2>
                            <h1 class="text-3xl font-bold mt-1 drop-shadow-md tracking-wide">{{ currentDayData.date }}</h1>
                            <div class="flex items-center mt-2 gap-2">
                                <i class="fas fa-map-marker-alt text-white/90"></i>
                                <span class="font-medium text-white/95">{{ currentDayData.location }}</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-4xl font-light leading-none drop-shadow-md">{{ currentDayData.temp }}</div>
                            <div v-if="currentDayData.rain" class="flex items-center justify-end gap-1 mt-2 text-blue-100">
                                <i class="fas fa-umbrella text-sm"></i>
                                <span class="text-lg font-bold">{{ currentDayData.rain }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. 行程時間軸 -->
                <div class="p-4 mt-2 space-y-2 pb-10">
                    <div v-for="(event, index) in currentDayData.events" :key="index" 
                         class="relative flex gap-4 animate-fade-in"
                         :style="{ animationDelay: `${index * 0.05}s` }"
                         :class="{ 'last-item': index === currentDayData.events.length - 1 }">
                        
                        <!-- 左側時間 -->
                        <div class="flex flex-col items-center w-12 flex-shrink-0 relative z-10">
                            <span class="text-xs font-bold text-gray-300 mb-1 drop-shadow-md">{{ event.time }}</span>
                            <div class="w-10 h-10 rounded-full flex items-center justify-center shadow-lg border-2 border-white/80 text-white"
                                 :class="getIconColor(event.icon)">
                                <i :class="getIconClass(event.icon)" class="text-sm"></i>
                            </div>
                            <div class="timeline-line shadow-sm"></div>
                        </div>

                        <!-- 右側卡片 -->
                        <div class="flex-1 bg-white/95 backdrop-blur-sm p-4 rounded-xl shadow-md border border-gray-100 mb-6 active:scale-[0.98] transition-transform duration-200">
                            <div class="flex justify-between items-start">
                                <h3 class="font-bold text-gray-800 text-lg leading-tight">{{ event.title }}</h3>
                            </div>
                            <p v-if="event.desc" class="text-gray-500 text-sm mt-2 leading-relaxed whitespace-pre-line">{{ event.desc }}</p>

                            <!-- ★★★ 修改處：支援多顆粉紅色圖片按鈕 (已縮小並排) ★★★ -->
                            <div v-if="event.imageBtns || event.imageBtn" class="mt-2 flex flex-wrap gap-2">
                                <button v-for="(btn, bIdx) in (event.imageBtns || [event.imageBtn])" :key="bIdx"
                                        @click.stop="openImagePreview(btn.url)" 
                                        class="flex-1 py-1.5 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white text-xs font-bold rounded-lg shadow-sm transition-all flex items-center justify-center gap-1.5 animate-pulse">
                                    <i class="fas fa-book-open"></i> {{ btn.text }}
                                </button>
                            </div>

                            <!-- 圖片直接顯示 (相容舊設定) -->
                            <div v-if="event.image" class="mt-3 mb-1">
                                <div class="relative group rounded-lg overflow-hidden border border-gray-200 shadow-sm" @click.stop="openImagePreview(event.image)">
                                    <img :src="event.image" class="w-full h-auto object-cover" alt="Event Image">
                                    <div class="absolute inset-0 bg-black/0 group-hover:bg-black/10 flex items-center justify-center transition-all">
                                        <div class="bg-black/50 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm flex items-center gap-1">
                                            <i class="fas fa-search-plus"></i> 點擊放大
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 一般按鈕區 -->
                            <div class="mt-3 flex flex-wrap gap-2">
                                <a v-if="event.map && !event.navs" :href="event.map" target="_blank" class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-600 text-xs font-bold rounded-full hover:bg-blue-100 transition-colors"><i class="fas fa-location-arrow"></i> 導航</a>
                                <a v-for="(nav, i) in event.navs" :key="i" :href="nav.url" target="_blank" class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-600 text-xs font-bold rounded-full hover:bg-blue-100 transition-colors border border-blue-100"><i :class="nav.label.includes('停車') ? 'fas fa-square-parking' : 'fas fa-location-arrow'"></i> {{ nav.label }}</a>
                                <button v-if="event.modal" @click.stop="openModal(event)" class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-purple-50 text-purple-600 text-xs font-bold rounded-full hover:bg-purple-100 transition-colors"><i class="fas fa-info-circle"></i> 詳細資訊</button>
                                <span v-if="event.tag" class="inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-[10px] rounded md:rounded">#{{ event.tag }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
    </div>

    <!-- 底部導航列 -->
    <div class="fixed bottom-0 w-full max-w-md bg-gray-900/60 backdrop-blur-xl border-t border-white/10 z-30 safe-bottom shadow-[0_-10px_40px_rgba(0,0,0,0.5)]">
        <div class="flex overflow-x-auto no-scrollbar py-3 px-2 space-x-2" id="day-nav-container">
            <button v-for="(day, index) in tripData" :key="index"
                    @click="goToDay(index)"
                    :id="'day-btn-' + index"
                    class="flex-shrink-0 flex flex-col items-center justify-center w-14 h-14 rounded-2xl transition-all duration-300 relative border"
                    :class="index === currentDayIndex 
                        ? 'bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-[0_0_15px_rgba(59,130,246,0.5)] scale-105 border-transparent' 
                        : 'bg-white/5 text-gray-400 border-white/5 hover:bg-white/10'">
                <span class="text-[10px] font-medium opacity-60">Day</span>
                <span class="text-xl font-bold leading-none">{{ index + 1 }}</span>
                <span v-if="index === currentDayIndex" class="text-[9px] mt-0.5 opacity-90 font-light tracking-tight">{{ day.date.split('/')[1].split(' ')[0] }}</span>
            </button>
            <div class="w-2 flex-shrink-0"></div>
        </div>
    </div>

    <!-- 文字 Modal -->
    <div v-if="showModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-fade-in" @click="closeModal">
        <div class="bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl transform transition-all" @click.stop>
            <div class="bg-gray-50 px-5 py-4 border-b border-gray-100 flex justify-between items-center">
                <h3 class="font-bold text-gray-800 text-lg">詳細資訊</h3>
                <button @click="closeModal" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-5 overflow-y-auto max-h-[60vh]"><div v-html="modalContent" class="text-gray-600 text-sm leading-relaxed whitespace-pre-line"></div></div>
            <div class="p-4 border-t border-gray-100"><button @click="closeModal" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 rounded-xl shadow-md transition-colors">關閉</button></div>
        </div>
    </div>

    <!-- 圖片放大預覽 Modal -->
    <div v-if="showImageModal" class="fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-2 animate-fade-in cursor-zoom-out" @click="closeImagePreview">
        <div class="relative max-w-full max-h-full">
            <button @click="closeImagePreview" class="absolute -top-10 right-0 text-white/80 hover:text-white p-2">
                <i class="fas fa-times text-2xl"></i>
            </button>
            <img :src="previewImageUrl" class="max-w-full max-h-[90vh] rounded-lg shadow-2xl object-contain" @click.stop>
        </div>
    </div>

</div>

<script>
const { createApp, ref, computed, nextTick } = Vue;

createApp({
    setup() {
        const currentDayIndex = ref(0);
        const showModal = ref(false);
        const modalContent = ref('');
        const transitionName = ref('slide-left');
        const showImageModal = ref(false);
        const previewImageUrl = ref('');
        const touchStartX = ref(0);
        const touchEndX = ref(0);

        const getIconClass = (type) => {
            const map = { plane: 'fas fa-plane', train: 'fas fa-train', food: 'fas fa-utensils', bus: 'fas fa-bus', car: 'fas fa-car', walk: 'fas fa-walking', hotel: 'fas fa-bed', camera: 'fas fa-camera', shrine: 'fas fa-torii-gate', mountain: 'fas fa-mountain', star: 'fas fa-star', shop: 'fas fa-shopping-bag', disney: 'fas fa-wand-magic-sparkles', info: 'fas fa-info' };
            return map[type] || 'fas fa-map-marker-alt';
        };
        const getIconColor = (type) => {
            const map = { plane: 'bg-blue-500', train: 'bg-green-500', bus: 'bg-green-600', car: 'bg-teal-500', food: 'bg-orange-400', shrine: 'bg-red-500', disney: 'bg-purple-500', shop: 'bg-pink-500', camera: 'bg-indigo-500', hotel: 'bg-gray-700' };
            return map[type] || 'bg-gray-400';
        };

        const tripData = [
            {
                date: "11/27 (四)",
                location: "台北 ➔ 東京",
                temp: "9°C~15°C",
                rain: "30%",
                bgImage: "https://i.postimg.cc/Pf7392wd/photo-1540959733332-eab4deabeeaf.avif", 
                events: [
                    { time: "11:36", icon: "train", title: "出發前往台北", desc: "11:36～12:39"},
                    { time: "13:00", icon: "food", title: "劉山東牛肉麵", desc: "必吃！建議提早排隊。", map: "https://maps.app.goo.gl/J4eh8aLS9BR8HJUK8", tag: "午餐" },
                    { time: "15:30", icon: "bus", title: "前往松山機場", desc: "從北車出發", map: "https://maps.app.goo.gl/iz42V3WncSNLXZ8P8"},
                    { time: "18:25", icon: "plane", title: "飛往羽田機場", desc: "CI222 | 22:15 抵達羽田\n住宿於機場附近", map: "https://maps.app.goo.gl/wPF2hWabRG5zvSBu8", modal: "航班資訊: CI222\n出發: TSA 18:25\n抵達: HND 22:15\n\n記得填寫 VJW 入境卡！" }
                ]
            },
            {
                date: "11/28 (五)",
                location: "富士山 (自駕)",
                temp: "2°C~15°C",
                rain: "60%",
                bgImage: "https://i.postimg.cc/1zSYMXNv/photo-1490806843957-31f4c9a91c65.avif", 
                events: [
                    { 
                        time: "11:30", icon: "food", title: "午餐：山梨名物", desc: "Taihou(大豊) or 小作 山中湖店 or Mori no Aruma", 
                        navs: [
                            { label: "Taihou(大豊)", url: "https://maps.app.goo.gl/JN5U5w93GJtdBVbr7" },
                            { label: "小作 山中湖店", url: "https://maps.app.goo.gl/CKy33BDWHuvscojC8" },
                            { label: "Mori no Aruma", url: "https://maps.app.goo.gl/vhGmXVeu32x4riUW6" }
                        ]
                    },
                    { 
                        time: "13:00", icon: "camera", title: "山中湖親水公園", desc: "平野之濱，有天鵝與富士山景", 
                        navs: [
                            { label: "山中湖親水公園", url: "https://maps.app.goo.gl/LUiD7cHnbrdoChJa6" },
                            { label: "平野之濱", url: "https://maps.app.goo.gl/X3MiW3GoL73F2mFQ9" }
                        ]
                    },
                    { 
                        time: "13:50", icon: "water", title: "忍野八海", desc: "吃池本茶屋的岩魚或山女魚", 
                        navs: [
                            { label: "忍野八海", url: "https://maps.app.goo.gl/QYbMyGMLnrx7D6cn9" },
                            { label: "停車", url: "https://maps.app.goo.gl/modSb95Mb37F8FGp9" }
                        ]
                    },
                    { time: "15:30", icon: "shrine", title: "新倉山淺間神社", desc: "著名五重塔與富士山景點", map: "https://maps.app.goo.gl/JxUWiJaq9YYZNsCW9" },
                    { 
                        time: "16:30", icon: "camera", title: "日川時計店+金鳥居", desc: "16:30天黑，務必提早到拍路燈+街景",
                        navs: [
                            { label: "日川時計店", url: "https://maps.app.goo.gl/Y6bK8efrGW2dBakS6" },
                            { label: "金鳥居", url: "https://maps.app.goo.gl/YqheSEkndRBrkRxb8" }, 
                            { label: "停車", url: "https://maps.app.goo.gl/W8Q7Dd1BJPJMWB3i9" }
                        ]
                    },
                    { 
                        time: "17:30", icon: "food", title: "晚餐", desc: "暫定：SAKUYA(鰻魚飯) 或 M2(日式西餐) 或 Izumiya",
                        navs: [
                            { label: "SAKUYA", url: "https://maps.app.goo.gl/2MgmyVfYECeVriAB9" },
                            { label: "M2", url: "https://maps.app.goo.gl/dE4nVsRN33Vt4LoA8" }, 
                            { label: "Izumiya", url: "https://maps.app.goo.gl/sHW9DFucDgog6C3UA" }
                        ]
                    }
                ]
            },
            {
                date: "11/29 (六)",
                location: "河口湖周邊",
                temp: "-1°C~13°C",
                rain: "20%",
                bgImage: "https://i.postimg.cc/52LwPmwT/unnamed.webp",
                events: [
                    { 
                        time: "09:00", icon: "mountain", title: "富士急樂園", desc: "不一定要玩設施，可逛逛拍照", map: "https://maps.app.goo.gl/iC1bCBTwqu2G5jWG6",
                        imageBtns: [
                            { text: "富士急樂園地圖", url: "https://i.postimg.cc/Cxz1vMkb/tu-pian2.jpg" }
                        ],
                    },
                    { time: "13:00", icon: "food", title: "午餐", desc: "看情況" },
                    { time: "14:30", icon: "shrine", title: "河口淺間神社", desc: "千年杉樹，神聖氛圍", map: "https://maps.app.goo.gl/LAqQu3nCeRktFSe77" },
                    { time: "15:45", icon: "camera", title: "河口湖楓葉迴廊", desc: "欣賞紅葉與富士山", map: "https://maps.app.goo.gl/1wonW3iEEUmnBdC58" },
                    { time: "18:00", icon: "food", title: "晚餐 (待定)", desc: "可尋找河口湖車站附近美食" }
                ]
            },
            {
                date: "11/30 (日)",
                location: "高尾山 ➔ 東京",
                temp: "2°C~17°C",
                rain: "20%",
                bgImage: "https://i.postimg.cc/xjFf7D5G/10898001089.jpg",
                events: [
                    { time: "06:30", icon: "car", title: "飯店出發", desc: "早起出發前往高尾山" },
                    { time: "07:45", icon: "mountain", title: "高尾山祈祷所 駐車場", desc: "抵達停車場，準備上山", map: "https://maps.app.goo.gl/Ha3McdR8ZnQp4vQm8" },
                    { time: "08:00", icon: "walk", title: "高尾山健行", desc: "纜車上山 ➔ 走4號路線\n下山走1號路線" },
                    { time: "13:00", icon: "car", title: "前往東京淺草", desc: "車程約 1.5 小時" },
                    { 
                        time: "14:30", icon: "hotel", title: "淺草格拉斯麗飯店", desc: "先還車再Check-in", 
                        navs: [
                            { label: "飯店", url: "https://maps.app.goo.gl/2MgmyVfYECeVriAB9" },
                            { label: "租車公司", url: "https://maps.app.goo.gl/gyCU95VPHhw1bsYx6" }
                        ] 
                    },
                    { time: "15:30", icon: "train", title: "前往銀座", desc: "搭乘地鐵前往銀座商圈", map: "https://maps.app.goo.gl/uzkEJKMFreCi9Cx2A" },
                    { 
                        time: "17:00", icon: "shop", title: "銀座逛街 & 美食", desc: "必買：銀座木村家(百年紅豆麵包，要在傍晚前買！)\n逛：agnès b., 無印, UQ, 唐吉訶德",
                        navs: [
                            { label: "銀座木村家", url: "https://maps.app.goo.gl/2MgmyVfYECeVriAB9" },
                            { label: "逛", url: "https://maps.app.goo.gl/tL8VbRoxgH8BGAMW8" }
                        ]  
                    },
                    { time: "19:00", icon: "food", title: "晚餐：TsuruTonTan", desc: "Brasserie銀座店 (烏龍麵)", map: "https://maps.app.goo.gl/CHWUXS8dExSStHrq6" }
                ]
            },
            {
                date: "12/01 (一)",
                location: "淺草 ➔ 明治神宮",
                temp: "10°C~18°C",
                rain: "10%",
                bgImage: "https://i.postimg.cc/VkKbZHJg/wp-10-14-sp-03.jpg",
                events: [
                    { time: "09:00", icon: "camera", title: "和裝工房雅 穿和服", desc: "預約攝影1小時", map: "https://maps.app.goo.gl/KY6Two5HtD9icBJu7" },
                    { time: "11:00", icon: "shrine", title: "淺草寺 + 雷門", desc: "必吃：抹茶冰淇淋、炸肉餅", map: "https://maps.app.goo.gl/zUAF6jz8hN1S91FU7" },
                    { time: "12:30", icon: "walk", title: "歸還和服", desc: "回到和裝工房雅", map: "https://maps.app.goo.gl/KY6Two5HtD9icBJu7"  },
                    { time: "13:30", icon: "food", title: "午餐 (待定)", desc: "下午為自由行動時間" },
                    { time: "15:00", icon: "train", title: "前往明治神宮外苑", desc: "大家集合，盡量早一點到", map: "https://maps.app.goo.gl/ajewQgpE1RX3gbbK6" },
                    { time: "15:50", icon: "camera", title: "銀杏大道 + 耶誕市集", desc: "欣賞金黃銀杏大道" },
                    { time: "18:00", icon: "food", title: "晚餐：Rojiura Curry", desc: "SAMURAI - Harajuku (湯咖哩)", map: "https://maps.app.goo.gl/AvmRJYRy5jovuYDu8" }
                ]
            },
            {
                date: "12/02 (二)",
                location: "東京迪士尼樂園",
                temp: "6°C~14°C",
                rain: "20%",
                bgImage: "https://i.postimg.cc/J7Q7QHDv/zhuo-bu.jpg",
                events: [
                    { 
                        time: "06:00", 
                        icon: "train", 
                        title: "出發！", 
                        desc: "記得帶早餐，預計6:30抵達排隊",
                        // ★★★ 修改處：改成 imageBtns 陣列，這樣可以支援多顆按鈕 ★★★
                        imageBtns: [
                            { text: "新手須知 !", url: "https://i.postimg.cc/tJLdYnzj/xin-shou-xu-zhi.jpg" },
                            { text: "排隊位置", url: "https://i.postimg.cc/pTSdKg1J/lu-de-pai-dui-jian-yi-wei-zhi.jpg" },
                        ], 
                    },
                    { 
                        time: "06:30", 
                        icon: "train", 
                        title: "入園！", 
                        desc: "都市傳說抽ER：HE入園的時間不抽，等一般入園時間到才抽，增加抽中機率",
                        imageBtns: [
                            { text: "陸地DPA費用", url: "https://i.postimg.cc/4d9DFqx7/DPA-lu-de.jpg" },
                            { text: "迪士尼地圖", url: "https://i.postimg.cc/Vk3Vt5Db/TDL-map-tc.png" },
                            { text: "Show的注意事項!", url: "https://i.postimg.cc/wMxVZ458/Show-de-zhu-yi-shi-xiang.png" },
                        ], 
                    },
                    { time: "08:30", icon: "disney", title: "夢幻樂園攻略", desc: "1. 美女與野獸 (首選)\n2. 小熊維尼獵蜜記\n3. 幽靈公館\n4. 米奇魔法音樂世界", modal: "夢幻樂園清單:\n1.美女與野獸\n2.小熊維尼獵蜜記\n3.白雪公主冒險旅程\n4.幽靈公館\n5.愛麗絲的午茶派對\n6.小飛象\n7.小飛俠天空之旅\n8.小木偶奇遇記\n9.城堡旋轉木馬\n10.仙履奇緣童話大廳\n11.米奇魔法音樂世界(25分)" },
                    { 
                        time: "12:45", icon: "star", title: "玩具奇妙聖誕！NEW（遊行表演）", desc: "白天遊行 (45分鐘)"
                        imageBtns: [
                            { text: "地圖", url: "https://i.postimg.cc/KvjXgJ6Q/wan-ju-qi-miao-sheng-dan-de-tu.jpg" },
                        ],
                    },
                    { time: "14:00", icon: "disney", title: "卡通/明日/西部樂園", desc: "怪獸電力公司、杯麵、巴斯光年\n巨雷山、加勒比海盜", modal: "卡通城:\n米奇魔法交響樂、米奇公館、米妮風格工作室\n\n明日樂園:\n1.怪獸電力公司\n2.杯麵\n3.巴斯光年\n4.幸會史迪奇\n\n探索/西部:\n加勒比海盜、巨雷山" },
                    { 
                        time: "15:25", icon: "star", title: "迪士尼眾彩交融（遊行表演）", desc: "白天遊行 (45分鐘)"
                        imageBtns: [
                            { text: "地圖", url: "https://i.postimg.cc/C5QfLcq2/di-shi-ni-zhong-cai-jiao-rong-de-tu.jpg" },
                        ],
                    },
                    { 
                        time: "17:45", icon: "star", title: "Reach for the Stars（城堡秀）", desc: "（20分鐘）"
                        imageBtns: [
                            { text: "地圖", url: "https://i.postimg.cc/52qNsPt9/Reach-for-the-Stars-de-tu.jpg" },
                        ],
                    },
                    { 
                        time: "19:00", icon: "star", title: "電子大遊行～夢之光（遊行表演）", desc: "夜間遊行 (45分鐘)"
                        imageBtns: [
                            { text: "地圖", url: "https://i.postimg.cc/6378bdSY/dong-jing-di-shi-ni-le-yuan-dian-zi-da-you-xing-meng-zhi-guang-de-tu.jpg" },
                        ],
                    },
                    { time: "20:30", icon: "star", title: "星彩聖誕！NEW", desc: "結尾煙火 (5分鐘)" }
                ]
            },
            {
                date: "12/03 (三)",
                location: "木更津 Outlet",
                temp: "2°C~17°C",
                rain: "20%",
                bgImage: "https://i.postimg.cc/Gh2RJ713/mitsui-kisarazu-00.jpg",
                events: [
                    { time: "08:00", icon: "train", title: "前往東京車站", desc: "搭乘銀座線至京橋(東京)站", map: "https://maps.app.goo.gl/SqMZeFVE6SrG1nHs9" },
                    { time: "08:30", icon: "bus", title: "巴士總站東京八重洲", desc: "準備搭乘高速巴士", map: "https://maps.app.goo.gl/fXok2rLSbjGNsept8" },
                    { time: "09:05", icon: "bus", title: "前往木更津", desc: "09:05 - 09:55 抵達" },
                    { 
                        time: "10:00", icon: "shop", title: "木更津 Outlet", desc: "記得先去領優惠券！",
                        navs: [
                            { label: "木更津 Outlet", url: "https://maps.app.goo.gl/LixDBYnCLQozndhLA" },
                            { label: "免稅櫃台", url: "https://pievat.com/tourists/japan/station-list/mitsui-outlet-park-kisarazu" },
                            { label: "優惠券", url: "https://mitsui-shopping-park.com/lalaport/msp-info/special-offer/" },
                            { label: "刷卡回饋", url: "https://www.specialoffers.jcb/zh-tw/campaign/detail/mitsuifudosan2025/81829/" }
                        ]
                    },
                    { time: "14:30", icon: "bus", title: "返回東京", desc: "14:30 - 15:20 抵達東京八重洲" },
                    { time: "16:00", icon: "shop", title: "逛東京車站", desc: "購買 Number Sugar", tag: "伴手禮" }
                ]
            },
            {
                date: "12/04 (四)",
                location: "東京 ➔ 台北",
                temp: "2°C~17°C",
                rain: "20%",
                bgImage: "https://i.postimg.cc/yxGbTTFm/other-img-photo-contest-2020-02.jpg", 
                events: [
                    { time: "10:00", icon: "walk", title: "前往地鐵站", desc: "從地面往南走到駒形橋前方的都營地鐵淺草線「A2b」入口 (有電梯)", navs: [{ label: "交通方式", url: "https://lazyjapan.com/regions/tokyo/transport/airport/haneda/from-asakusa.html" }] },
                    { time: "11:00", icon: "plane", title: "抵達羽田機場 T3", desc: "最後逛街衝刺！",navs: [{ label: "羽田機場必買伴手禮", url: "https://wind.suzukihiro.tw/haneda-airport-gift2025/" }] },
                    { time: "12:00", icon: "food", title: "午餐：Tokyo Shokudo", desc: "位於 4F，乾淨好吃" },
                    { time: "14:15", icon: "plane", title: "飛往松山機場", desc: "17:15 抵達台北", modal: "回程航班\nHND 14:15 -> TSA 17:15\n\n回家囉！" }
                ]
            }
        ];

        const currentDayData = computed(() => tripData[currentDayIndex.value]);

        const goToDay = (index) => {
            transitionName.value = index > currentDayIndex.value ? 'slide-left' : 'slide-right';
            currentDayIndex.value = index;
            window.scrollTo(0, 0);

            nextTick(() => {
                const container = document.getElementById('day-nav-container');
                const btn = document.getElementById('day-btn-' + index);
                if (container && btn) {
                    const scrollLeft = btn.offsetLeft - (container.clientWidth / 2) + (btn.clientWidth / 2);
                    container.scrollTo({ left: scrollLeft, behavior: 'smooth' });
                }
            });
        };

        const onTouchStart = (e) => {
            touchStartX.value = e.changedTouches[0].screenX;
        };

        const onTouchEnd = (e) => {
            touchEndX.value = e.changedTouches[0].screenX;
            handleSwipe();
        };

        const handleSwipe = () => {
            const threshold = 50;
            const diff = touchStartX.value - touchEndX.value;
            if (Math.abs(diff) > threshold) {
                if (diff > 0) {
                    if (currentDayIndex.value < tripData.length - 1) goToDay(currentDayIndex.value + 1);
                } else {
                    if (currentDayIndex.value > 0) goToDay(currentDayIndex.value - 1);
                }
            }
        };

        const openModal = (event) => {
            modalContent.value = event.modal || event.desc;
            showModal.value = true;
        };

        const closeModal = () => {
            showModal.value = false;
        };

        const openImagePreview = (url) => {
            previewImageUrl.value = url;
            showImageModal.value = true;
        };

        const closeImagePreview = () => {
            showImageModal.value = false;
        };

        return {
            tripData,
            currentDayIndex,
            currentDayData,
            goToDay,
            showModal,
            modalContent,
            openModal,
            closeModal,
            getIconClass,
            getIconColor,
            transitionName,
            showImageModal,
            previewImageUrl,
            openImagePreview,
            closeImagePreview,
            onTouchStart,
            onTouchEnd
        };
    }
}).mount('#app');
</script>
</body>
</html>
