<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>東京富士山 8日遊</title>
    <!-- 引入 Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 FontAwesome 圖示 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #1a1a1a;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        
        /* 關鍵設定：允許垂直捲動，但鎖定水平滑動給 JS 控制 */
        .touch-area {
            touch-action: pan-y; 
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        .timeline-line {
            position: absolute; left: 1.25rem; top: 2.5rem; bottom: -2rem; width: 2px; background-color: #e5e7eb; z-index: 0;
        }
        .last-item .timeline-line { display: none; }
        
        /* --- 滑動動畫樣式 --- */
        /* 下一天 (向左滑，內容從右邊進來) */
        .slide-left-enter-active, .slide-left-leave-active {
            transition: all 0.3s ease-out;
        }
        .slide-left-enter-from { opacity: 0; transform: translateX(50px); }
        .slide-left-leave-to { opacity: 0; transform: translateX(-50px); }

        /* 上一天 (向右滑，內容從左邊進來) */
        .slide-right-enter-active, .slide-right-leave-active {
            transition: all 0.3s ease-out;
        }
        .slide-right-enter-from { opacity: 0; transform: translateX(-50px); }
        .slide-right-leave-to { opacity: 0; transform: translateX(50px); }

        /* 淡入動畫 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out;
        }
    </style>
</head>
<body>

<!-- 
    綁定 touchstart 與 touchend 事件 
    touch-area 類別是用來設定 CSS touch-action
-->
<div id="app" 
     @touchstart="touchStart" 
     @touchend="touchEnd"
     class="touch-area max-w-md mx-auto min-h-screen relative pb-24 overflow-hidden bg-gray-900 select-none">

    <!-- ★ 動態背景層 -->
    <div class="fixed inset-0 z-0 bg-cover bg-center transition-all duration-700 ease-in-out"
         :style="{ backgroundImage: `url(${currentDayData.bgImage})` }">
        <div class="absolute inset-0 bg-gray-900/60 backdrop-blur-[2px]"></div>
    </div>

    <!-- ★ 內容切換區 -->
    <div class="relative z-10 min-h-screen">
        <transition :name="transitionName" mode="out-in">
            <!-- key 改變時觸發動畫 -->
            <div :key="currentDayIndex" class="w-full">
                
                <!-- 1. Hero Section -->
                <div class="bg-gradient-to-r from-red-600/90 to-orange-600/90 backdrop-blur-md text-white p-6 rounded-b-3xl shadow-lg sticky top-0 z-20">
                    <div class="flex justify-between items-start">
                        <div>
                            <h2 class="text-sm text-yellow-300 font-bold tracking-wider drop-shadow-sm">TOKYO TRIP 2025</h2>
                            <h1 class="text-3xl font-bold mt-1 drop-shadow-md">{{ currentDayData.date }}</h1>
                            <div class="flex items-center mt-2 gap-2">
                                <i class="fas fa-map-marker-alt text-white/90"></i>
                                <span class="font-medium text-white/95">{{ currentDayData.location }}</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-4xl font-light leading-none drop-shadow-md">{{ currentDayData.temp }}</div>
                            <div v-if="currentDayData.rain" class="flex items-center justify-end gap-1 mt-2 text-blue-100">
                                <i class="fas fa-umbrella text-sm"></i>
                                <span class="text-lg font-bold">{{ currentDayData.rain }}</span>
                            </div>
                            <div class="text-xs opacity-80 mt-1 text-white">預測氣溫 / 降雨</div>
                        </div>
                    </div>
                    <!-- 進度條 -->
                    <div class="mt-4 h-1 bg-black/20 rounded-full overflow-hidden">
                        <div class="h-full bg-white/90 transition-all duration-500 shadow-[0_0_10px_rgba(255,255,255,0.5)]" 
                             :style="{ width: ((currentDayIndex + 1) / tripData.length * 100) + '%' }"></div>
                    </div>
                </div>

                <!-- 2. Smart Timeline -->
                <div class="p-4 mt-2 space-y-2">
                    <div v-for="(event, index) in currentDayData.events" :key="index" 
                         class="relative flex gap-4 animate-fade-in"
                         :style="{ animationDelay: `${index * 0.05}s` }"
                         :class="{ 'last-item': index === currentDayData.events.length - 1 }">
                        
                        <!-- 左側時間與圖示 -->
                        <div class="flex flex-col items-center w-12 flex-shrink-0 relative z-10">
                            <span class="text-xs font-bold text-gray-300 mb-1 drop-shadow-md">{{ event.time }}</span>
                            <div class="w-10 h-10 rounded-full flex items-center justify-center shadow-lg border-2 border-white/80 text-white"
                                 :class="getIconColor(event.icon)">
                                <i :class="getIconClass(event.icon)" class="text-sm"></i>
                            </div>
                            <div class="timeline-line shadow-sm"></div>
                        </div>

                        <!-- 右側卡片 -->
                        <div class="flex-1 bg-white/95 backdrop-blur-sm p-4 rounded-xl shadow-md border border-gray-100 mb-6 active:scale-[0.98] transition-transform duration-200">
                            <div class="flex justify-between items-start">
                                <h3 class="font-bold text-gray-800 text-lg leading-tight">{{ event.title }}</h3>
                            </div>
                            <p v-if="event.desc" class="text-gray-500 text-sm mt-2 leading-relaxed whitespace-pre-line">{{ event.desc }}</p>

                            <!-- 導航與按鈕 -->
                            <div class="mt-3 flex flex-wrap gap-2">
                                <a v-if="event.map && !event.navs" :href="event.map" target="_blank" 
                                   class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-600 text-xs font-bold rounded-full hover:bg-blue-100 transition-colors">
                                    <i class="fas fa-location-arrow"></i> 導航
                                </a>
                                <a v-for="(nav, i) in event.navs" :key="i" :href="nav.url" target="_blank"
                                   class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-600 text-xs font-bold rounded-full hover:bg-blue-100 transition-colors border border-blue-100">
                                    <i :class="nav.label.includes('停車') ? 'fas fa-square-parking' : 'fas fa-location-arrow'"></i> {{ nav.label }}
                                </a>
                                <button v-if="event.modal" @click.stop="openModal(event)"
                                        class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-purple-50 text-purple-600 text-xs font-bold rounded-full hover:bg-purple-100 transition-colors">
                                    <i class="fas fa-info-circle"></i> 詳細資訊
                                </button>
                                <span v-if="event.tag" class="inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-[10px] rounded md:rounded">#{{ event.tag }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 底部提示文字 -->
                <div class="text-center text-gray-400 text-xs pb-4 opacity-50">
                    <i class="fas fa-arrows-left-right mr-1"></i> 左右滑動切換日期
                </div>
            </div>
        </transition>
    </div>

    <!-- 3. 底部導航欄 -->
    <div class="fixed bottom-0 w-full max-w-md bg-white/95 backdrop-blur border-t border-gray-200 flex justify-between items-center px-4 py-3 z-30 safe-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
        <button @click="prevDay" :disabled="currentDayIndex === 0"
                class="p-2 rounded-full hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-gray-600">
            <i class="fas fa-chevron-left text-xl"></i>
        </button>

        <div class="flex flex-col items-center cursor-pointer" @click="showDaySelector = !showDaySelector">
            <span class="text-xs text-gray-400 font-medium">Day {{ currentDayIndex + 1 }} / {{ tripData.length }}</span>
            <span class="text-sm font-bold text-blue-600">
                {{ currentDayData.date.split(' ')[0] }}
                <i class="fas fa-caret-up ml-1"></i>
            </span>
        </div>

        <button @click="nextDay" :disabled="currentDayIndex === tripData.length - 1"
                class="p-2 rounded-full hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-gray-600">
            <i class="fas fa-chevron-right text-xl"></i>
        </button>
    </div>

    <!-- Popup Components -->
    <div v-if="showDaySelector" class="fixed inset-0 bg-black/50 z-40 flex items-end justify-center" @click="showDaySelector = false">
        <div class="bg-white w-full max-w-md rounded-t-2xl p-4 max-h-[70vh] overflow-y-auto safe-bottom" @click.stop>
            <h3 class="text-center font-bold text-gray-700 mb-4">選擇日期</h3>
            <div class="grid grid-cols-1 gap-2">
                <button v-for="(day, idx) in tripData" :key="idx" @click="goToDay(idx)" class="p-3 rounded-xl text-left flex items-center gap-3 transition-colors" :class="idx === currentDayIndex ? 'bg-blue-50 border border-blue-200' : 'hover:bg-gray-50 border border-transparent'">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold" :class="idx === currentDayIndex ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-600'">{{ idx + 1 }}</div>
                    <div><div class="font-bold text-gray-800">{{ day.date }}</div><div class="text-xs text-gray-500">{{ day.location }}</div></div>
                </button>
            </div>
        </div>
    </div>
    <div v-if="showModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-fade-in" @click="closeModal">
        <div class="bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl transform transition-all" @click.stop>
            <div class="bg-gray-50 px-5 py-4 border-b border-gray-100 flex justify-between items-center">
                <h3 class="font-bold text-gray-800 text-lg">詳細資訊</h3>
                <button @click="closeModal" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-5 overflow-y-auto max-h-[60vh]"><div v-html="modalContent" class="text-gray-600 text-sm leading-relaxed whitespace-pre-line"></div></div>
            <div class="p-4 border-t border-gray-100"><button @click="closeModal" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 rounded-xl shadow-md transition-colors">關閉</button></div>
        </div>
    </div>
</div>

<script>
const { createApp, ref, computed } = Vue;

createApp({
    setup() {
        const currentDayIndex = ref(0);
        const showModal = ref(false);
        const modalContent = ref('');
        const showDaySelector = ref(false);
        const transitionName = ref('slide-left');

        // --- 滑動邏輯 ---
        const touchStartX = ref(0);
        const touchStartY = ref(0);

        const touchStart = (e) => {
            // 記錄按下的位置
            touchStartX.value = e.touches[0].clientX;
            touchStartY.value = e.touches[0].clientY;
        };

        const touchEnd = (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            
            const diffX = touchStartX.value - touchEndX;
            const diffY = touchStartY.value - touchEndY;

            // 1. 判斷是否為水平滑動 (X軸移動距離 > Y軸移動距離)
            // 這是為了防止在上下捲動頁面時誤觸切換
            if (Math.abs(diffX) > Math.abs(diffY)) {
                
                // 2. 判斷滑動距離是否足夠 (大於 50px)
                if (Math.abs(diffX) > 50) {
                    if (diffX > 0) {
                        // 向左滑 (diffX > 0) -> 下一天
                        nextDay();
                    } else {
                        // 向右滑 (diffX < 0) -> 上一天
                        prevDay();
                    }
                }
            }
        };

        const getIconClass = (type) => {
            const map = { plane: 'fas fa-plane', train: 'fas fa-train', food: 'fas fa-utensils', bus: 'fas fa-bus', car: 'fas fa-car', walk: 'fas fa-walking', hotel: 'fas fa-bed', camera: 'fas fa-camera', shrine: 'fas fa-torii-gate', mountain: 'fas fa-mountain', star: 'fas fa-star', shop: 'fas fa-shopping-bag', disney: 'fas fa-wand-magic-sparkles', info: 'fas fa-info' };
            return map[type] || 'fas fa-map-marker-alt';
        };
        const getIconColor = (type) => {
            const map = { plane: 'bg-blue-500', train: 'bg-green-500', bus: 'bg-green-600', car: 'bg-teal-500', food: 'bg-orange-400', shrine: 'bg-red-500', disney: 'bg-purple-500', shop: 'bg-pink-500', camera: 'bg-indigo-500', hotel: 'bg-gray-700' };
            return map[type] || 'bg-gray-400';
        };

        const tripData = [
            {
                date: "11/27 (四)",
                location: "台北 ➔ 東京",
                temp: "9°C~15°C",
                rain: "30%",
                bgImage: "https://png.pngtree.com/thumb_back/fh260/background/20220418/pngtree-tokyo-city-at-night-scenery-metropolis-night-photo-image_13177580.jpg",
                events: [
                    { time: "11:36", icon: "train", title: "出發去台北", desc: "11:36~12:39"},
                    { time: "13:00", icon: "food", title: "劉山東牛肉麵", desc: "必吃！建議提早排隊。", map: "https://maps.app.goo.gl/J4eh8aLS9BR8HJUK8", tag: "午餐" },
                    { time: "15:30", icon: "bus", title: "前往松山機場", desc: "從北車出發", map: "https://maps.app.goo.gl/iz42V3WncSNLXZ8P8"},
                    { time: "18:25", icon: "plane", title: "飛往羽田機場", desc: "CI222 | 22:15 抵達羽田\n住宿於機場附近", navs: [{ label: "飯店", url: "https://maps.app.goo.gl/KA9gNB67RUYMmEqy5" },], modal: "航班資訊: CI222\n出發: TSA 18:25\n抵達: HND 22:15\n\n記得填寫 VJW 入境卡！" }
                ]
            },
            {
                date: "11/28 (五)",
                location: "富士山 (自駕)",
                temp: "2°C~15°C",
                rain: "60%",
                bgImage: "https://banbi.tw/wp-content/uploads/20191023185628_90.jpg",
                events: [
                    { time: "11:30", icon: "food", title: "午餐：山梨名物", desc: "Taihou(大豊) or 小作 山中湖店 or Mori no Aruma", navs: [{ label: "Taihou(大豊)", url: "https://maps.app.goo.gl/JN5U5w93GJtdBVbr7" }, { label: "小作 山中湖店", url: "https://maps.app.goo.gl/CKy33BDWHuvscojC8" }, { label: "Mori no Aruma", url: "https://maps.app.goo.gl/vhGmXVeu32x4riUW6" }] },
                    { time: "13:00", icon: "camera", title: "山中湖親水公園", desc: "平野之濱，有天鵝與富士山景", navs: [{ label: "山中湖親水公園", url: "https://maps.app.goo.gl/LUiD7cHnbrdoChJa6" }, { label: "平野之濱", url: "https://maps.app.goo.gl/X3MiW3GoL73F2mFQ9" }] },
                    { time: "13:50", icon: "water", title: "忍野八海", desc: "吃池本茶屋的岩魚或山女魚", navs: [{ label: "忍野八海", url: "https://maps.app.goo.gl/QYbMyGMLnrx7D6cn9" }, { label: "停車", url: "https://maps.app.goo.gl/modSb95Mb37F8FGp9" }] },
                    { time: "15:30", icon: "shrine", title: "新倉山淺間神社", desc: "著名五重塔與富士山景點", map: "https://maps.app.goo.gl/JxUWiJaq9YYZNsCW9" },
                    { time: "16:30", icon: "camera", title: "日川時計店+金鳥居", desc: "16:30天黑，務必提早到拍路燈+街景", navs: [{ label: "日川時計店", url: "https://maps.app.goo.gl/Y6bK8efrGW2dBakS6" }, { label: "金鳥居", url: "https://maps.app.goo.gl/YqheSEkndRBrkRxb8" }, { label: "停車", url: "https://maps.app.goo.gl/W8Q7Dd1BJPJMWB3i9" }] },
                    { time: "17:30", icon: "food", title: "晚餐", desc: "暫定：SAKUYA(鰻魚飯) 或 M2(日式西餐) 或 Izumiya", navs: [{ label: "SAKUYA", url: "https://maps.app.goo.gl/2MgmyVfYECeVriAB9" }, { label: "M2", url: "https://maps.app.goo.gl/dE4nVsRN33Vt4LoA8" }, { label: "Izumiya", url: "https://maps.app.goo.gl/sHW9DFucDgog6C3UA" }] }
                ]
            },
            {
                date: "11/29 (六)",
                location: "河口湖周邊",
                temp: "-1°C~13°C",
                rain: "20%",
                bgImage: "https://i0.wp.com/listentolu.com/wp-content/uploads/PB270828.jpg?fit=2048%2C1365&ssl=1",
                events: [
                    { time: "09:00", icon: "mountain", title: "富士急樂園", desc: "不一定要玩設施，可逛逛拍照", map: "https://maps.app.goo.gl/iC1bCBTwqu2G5jWG6" },
                    { time: "13:00", icon: "food", title: "午餐", desc: "看情況" },
                    { time: "14:30", icon: "shrine", title: "河口淺間神社", desc: "千年杉樹，神聖氛圍", map: "https://maps.app.goo.gl/LAqQu3nCeRktFSe77" },
                    { time: "15:45", icon: "camera", title: "河口湖楓葉迴廊", desc: "欣賞紅葉與富士山", map: "https://maps.app.goo.gl/1wonW3iEEUmnBdC58" },
                    { time: "18:00", icon: "food", title: "晚餐 (待定)", desc: "可尋找河口湖車站附近美食" }
                ]
            },
            {
                date: "11/30 (日)",
                location: "高尾山 ➔ 東京",
                temp: "2°C~17°C",
                rain: "20%",
                bgImage: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR5YgXBSRtfv3LDyKNvgEEQYVPhd5RnZhsW4w&s",
                events: [
                    { time: "06:30", icon: "car", title: "飯店出發", desc: "早起出發前往高尾山" },
                    { time: "07:45", icon: "mountain", title: "高尾山祈祷所 駐車場", desc: "抵達停車場，準備上山", map: "https://maps.app.goo.gl/Ha3McdR8ZnQp4vQm8" },
                    { time: "08:00", icon: "walk", title: "高尾山健行", desc: "纜車上山 ➔ 走4號路線\n下山走1號路線" },
                    { time: "13:00", icon: "car", title: "前往東京淺草", desc: "車程約 1.5 小時" },
                    { time: "14:30", icon: "hotel", title: "淺草格拉斯麗飯店", desc: "先還車再Check-in", navs: [{ label: "飯店", url: "https://maps.app.goo.gl/2MgmyVfYECeVriAB9" }, { label: "租車公司", url: "https://maps.app.goo.gl/gyCU95VPHhw1bsYx6" }] },
                    { time: "15:30", icon: "train", title: "前往銀座", desc: "搭乘地鐵前往銀座商圈", map: "https://maps.app.goo.gl/uzkEJKMFreCi9Cx2A" },
                    { time: "17:00", icon: "shop", title: "銀座逛街 & 美食", desc: "必買：銀座木村家(百年紅豆麵包，要在傍晚前買！)\n逛：agnès b., 無印, UQ, 唐吉訶德", navs: [{ label: "銀座木村家", url: "https://maps.app.goo.gl/2MgmyVfYECeVriAB9" }, { label: "逛", url: "https://maps.app.goo.gl/tL8VbRoxgH8BGAMW8" }] },
                    { time: "19:00", icon: "food", title: "晚餐：TsuruTonTan", desc: "Brasserie銀座店 (烏龍麵)", map: "https://maps.app.goo.gl/CHWUXS8dExSStHrq6" }
                ]
            },
            {
                date: "12/01 (一)",
                location: "淺草 ➔ 明治神宮",
                temp: "10°C~18°C",
                rain: "10%",
                bgImage: "https://images.unsplash.com/photo-1583935294520-2b0b47df43ce?q=80&w=1000&auto=format&fit=crop",
                events: [
                    { time: "09:00", icon: "camera", title: "和裝工房雅 穿和服", desc: "預約攝影1小時", map: "https://maps.app.goo.gl/KY6Two5HtD9icBJu7" },
                    { time: "11:00", icon: "shrine", title: "淺草寺 + 雷門", desc: "必吃：抹茶冰淇淋、炸肉餅", map: "https://maps.app.goo.gl/zUAF6jz8hN1S91FU7" },
                    { time: "12:30", icon: "walk", title: "歸還和服", desc: "回到和裝工房雅", map: "https://maps.app.goo.gl/KY6Two5HtD9icBJu7" },
                    { time: "13:30", icon: "food", title: "午餐 (待定)", desc: "下午為自由行動時間" },
                    { time: "15:00", icon: "train", title: "前往明治神宮外苑", desc: "大家集合，盡量早一點到", map: "https://maps.app.goo.gl/ajewQgpE1RX3gbbK6" },
                    { time: "15:50", icon: "camera", title: "銀杏大道 + 耶誕市集", desc: "欣賞金黃銀杏大道" },
                    { time: "18:00", icon: "food", title: "晚餐：Rojiura Curry", desc: "SAMURAI - Harajuku (湯咖哩)", map: "https://maps.app.goo.gl/AvmRJYRy5jovuYDu8" }
                ]
            },
            {
                date: "12/02 (二)",
                location: "東京迪士尼樂園",
                temp: "6°C~14°C",
                rain: "20%",
                bgImage: "https://images.unsplash.com/photo-1545562083-c583d060a12e?q=80&w=1000&auto=format&fit=crop",
                events: [
                    { time: "06:00", icon: "train", title: "出發！", desc: "記得帶早餐，預計6:30抵達排隊", navs: [{ label: "地圖", url: "https://www.tokyodisneyresort.jp/tc/tdl/map.html" }] },
                    { time: "08:30", icon: "disney", title: "夢幻樂園攻略", desc: "1. 美女與野獸 (首選)\n2. 小熊維尼獵蜜記\n3. 幽靈公館\n4. 米奇魔法音樂世界", modal: "夢幻樂園清單:\n1.美女與野獸\n2.小熊維尼獵蜜記\n3.白雪公主冒險旅程\n4.幽靈公館\n5.愛麗絲的午茶派對\n6.小飛象\n7.小飛俠天空之旅\n8.小木偶奇遇記\n9.城堡旋轉木馬\n10.小小世界\n11.仙履奇緣童話大廳\n12.米奇魔法音樂世界(25分)" },
                    { time: "12:45", icon: "star", title: "玩具奇妙聖誕遊行", desc: "白天遊行 (45分鐘)"},
                    { time: "14:00", icon: "disney", title: "卡通/明日/西部樂園", desc: "怪獸電力公司、杯麵、巴斯光年\n巨雷山、加勒比海盜", modal: "卡通城:\n米奇魔法交響樂、米奇公館、米妮風格工作室\n\n明日樂園:\n1.怪獸電力公司\n2.杯麵\n3.巴斯光年\n4.幸會史迪奇\n\n探索/西部:\n加勒比海盜、巨雷山" },
                    { time: "19:00", icon: "star", title: "電子大遊行~夢之光", desc: "夜間遊行 (45分鐘)"},
                    { time: "20:30", icon: "star", title: "星彩聖誕 (煙火)", desc: "結尾煙火 (5分鐘)" }
                ]
            },
            {
                date: "12/03 (三)",
                location: "木更津 Outlet",
                temp: "2°C~17°C",
                rain: "20%",
                bgImage: "https://images.unsplash.com/photo-1472851294608-415522f97817?q=80&w=1000&auto=format&fit=crop",
                events: [
                    { time: "08:00", icon: "train", title: "前往東京車站", desc: "搭乘銀座線至京橋(東京)站", map: "https://maps.app.goo.gl/SqMZeFVE6SrG1nHs9" },
                    { time: "08:30", icon: "bus", title: "巴士總站東京八重洲", desc: "準備搭乘高速巴士", map: "https://maps.app.goo.gl/fXok2rLSbjGNsept8" },
                    { time: "09:05", icon: "bus", title: "前往木更津", desc: "09:05 - 09:55 抵達" },
                    { time: "10:00", icon: "shop", title: "木更津 Outlet", desc: "記得先去領優惠券！", navs: [{ label: "木更津 Outlet", url: "https://maps.app.goo.gl/LixDBYnCLQozndhLA" }, { label: "免稅櫃台", url: "https://pievat.com/tourists/japan/station-list/mitsui-outlet-park-kisarazu" }, { label: "優惠券", url: "https://mitsui-shopping-park.com/lalaport/msp-info/special-offer/" }, { label: "刷卡回饋", url: "https://www.specialoffers.jcb/zh-tw/campaign/detail/mitsuifudosan2025/81829/" }] },
                    { time: "14:30", icon: "bus", title: "返回東京", desc: "14:30 - 15:20 抵達東京八重洲" },
                    { time: "16:00", icon: "shop", title: "逛東京車站", desc: "購買 Number Sugar", tag: "伴手禮" }
                ]
            },
            {
                date: "12/04 (四)",
                location: "東京 ➔ 台北",
                temp: "2°C~17°C",
                rain: "20%",
                bgImage: "https://images.unsplash.com/photo-1542332205-4da5aa64a929?q=80&w=1000&auto=format&fit=crop",
                events: [
                    { time: "10:00", icon: "walk", title: "前往地鐵站", desc: "從地面往南走到駒形橋前方的都營地鐵淺草線「A2b」入口 (有電梯)", navs: [{ label: "交通方式", url: "https://lazyjapan.com/regions/tokyo/transport/airport/haneda/from-asakusa.html" }] },
                    { time: "11:00", icon: "plane", title: "抵達羽田機場 T3", desc: "最後逛街衝刺！", navs: [{ label: "羽田機場必買伴手禮", url: "https://wind.suzukihiro.tw/haneda-airport-gift2025/" }] },
                    { time: "12:00", icon: "food", title: "午餐：Tokyo Shokudo", desc: "位於 4F，乾淨好吃" },
                    { time: "14:15", icon: "plane", title: "飛往松山機場", desc: "17:15 抵達台北", modal: "回程航班\nHND 14:15 -> TSA 17:15\n\n回家囉！" }
                ]
            }
        ];

        const currentDayData = computed(() => tripData[currentDayIndex.value]);

        const nextDay = () => {
            if (currentDayIndex.value < tripData.length - 1) {
                transitionName.value = 'slide-left'; // 動畫向左滑
                currentDayIndex.value++;
                window.scrollTo(0, 0);
            }
        };

        const prevDay = () => {
            if (currentDayIndex.value > 0) {
                transitionName.value = 'slide-right'; // 動畫向右滑
                currentDayIndex.value--;
                window.scrollTo(0, 0);
            }
        };

        const goToDay = (index) => {
            transitionName.value = index > currentDayIndex.value ? 'slide-left' : 'slide-right';
            currentDayIndex.value = index;
            showDaySelector.value = false;
            window.scrollTo(0, 0);
        };

        const openModal = (event) => {
            modalContent.value = event.modal || event.desc;
            showModal.value = true;
        };

        const closeModal = () => {
            showModal.value = false;
        };

        return {
            tripData,
            currentDayIndex,
            currentDayData,
            nextDay,
            prevDay,
            goToDay,
            showModal,
            modalContent,
            openModal,
            closeModal,
            getIconClass,
            getIconColor,
            showDaySelector,
            transitionName,
            touchStart,
            touchEnd
        };
    }
}).mount('#app');
</script>
</body>
</html>
